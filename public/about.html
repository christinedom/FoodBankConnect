<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>About</title>
</head>
<body>
    <h1>About the Site</h1>

    <h1>Meet the Team</h1>
    <table id = "TeamMembers">
        <tr>
            <th>
                Name
            </th>
            <th>
                Photo
            </th>
            <th>
                Bio
            </th>
            <th>
                Major Responsibilities
            </th>
            <th>
                Number of Commits
            </th>
            <th>
                Number of Issues
            </th>
            <th>
                Number of Unit Tests
            </th>
        </tr>
        <tr id = "Odin">
            <td>
                Odin Limaye
            </td>
            <td>
                Coming soon 
            </td>
            <td>
                Coming soon 
            </td>
            <td>
                Coming soon 
            </td>
            <td id = "OdinCommits">
                Loading...
            </td>
            <td id = "OdinIssues">
                Loading...
            </td>
            <td>
                0
            </td>
        </tr>
        <tr id = "Francisco">
            <td>
                Francisco Vivas
            </td>
            <td>
                Coming soon 
            </td>
            <td>
                Coming soon 
            </td>
            <td>
                Coming soon 
            </td>
            <td id = "FranciscoCommits">
                Loading...
            </td>
            <td id = "FranciscoIssues">
                Loading...
            </td>
            <td>
                0
            </td>
        </tr>
        <tr id = "Mahika">
            <td>
                Mahika Dawar
            </td>
            <td>
                Coming soon 
            </td>
            <td>
                Coming soon 
            </td>
            <td>
                Coming soon 
            </td>
            <td id = "MahikaCommits">
                Loading...
            </td>
            <td id = "MahikaIssues">
                Loading...
            </td>
            <td>
                0
            </td>
        </tr>
        <tr id = "Jose">
            <td>
                Jose Lopez
            </td>
            <td>
                Coming soon 
            </td>
            <td>
                Coming soon 
            </td>
            <td>
                Coming soon 
            </td>
            <td id = "JoseCommits">
                Loading...
            </td>
            <td id = "JoseIssues">
                Loading...
            </td>
            <td>
                0
            </td>
        </tr>
        <tr id = "Christine">
            <td>
                Christine Dominic
            </td>
            <td>
                Coming soon 
            </td>
            <td>
                Coming soon 
            </td>
            <td>
                Coming soon 
            </td>
            <td id = "ChristineCommits">
                Loading...
            </td>
            <td id = "ChristineIssues">
                Loading...
            </td>
            <td>
                0
            </td>
        </tr>
    </table>

    <h1>Data Sources</h1>

    <h1>Tools Used</h1>

    <h1>Links Used</h1>

    <script>
        // Our repo's project ID
        const PROJECT = "74614252";

        // Array of each team member's first name and GitLab user ID
        var team = [
            {name: "Odin", user: "29883443"},
            {name: "Mahika", user: ""},
            {name: "Christine", user: ""},
            {name: "Jose", user: ""},
            {name: "Francisco", user: ""},
        ]

        for (var i = 0; i < team.length; i++) {
            (function(member) {
                const COMMITS = `https://gitlab.com/api/v4/projects/${PROJECT}/repository/commits?author_id=${member.user}`;
                const ISSUES = `https://gitlab.com/api/v4/projects/${PROJECT}/issues?author_id=${member.user}`;

                // Get the current member's commits
                fetch(COMMITS)
                    .then(function(raw_http) {
                        return raw_http.json();
                    })
                    .then(function(json_commits) {
                        // Update the corresponding entry in the table
                        document.getElementById(`${member.name}Commits`).textContent = json_commits.length;
                    })
                    .catch(function(error) {
                        // Something went wrong
                        console.error("Error fetching commits: ", error);
                        document.getElementById(`${member.name}Commits`).textContent = "Error fetching commits; refresh the page to try again.";
                    })

                // Get the current member's issues
                fetch(ISSUES)
                    .then(function(raw_http) {
                        return raw_http.json();
                    })
                    .then(function(json_issues) {
                        // Update the corresponding entry in the table
                        document.getElementById(`${member.name}Issues`).textContent = json_issues.length;
                    })
                    .catch(function(error) {
                        // Something went wrong
                        console.error("Error fetching issues: ", error);
                        document.getElementById(`${member.name}Issues`).textContent = "Error fetching issues; refresh the page to try again.";
                    })
            })(team[i])
        }
    </script>
</body>
</html>
