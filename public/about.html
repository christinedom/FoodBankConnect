<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>About - FoodBankConnect</title>

    <!-- Bootstrap CSS -->
    <link 
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet">
</head>
<body class="bg-light">

    <!-- Navbar (same style as index.html) -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="index.html">FoodBankConnect</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" 
                    data-bs-target="#navbarNav" aria-controls="navbarNav" 
                    aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link active" href="about.html">About</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container my-5">

        <h1 class="mb-4">About the Site</h1>

        <h2 class="mb-4">Meet the Team</h2>

        <div class="table-responsive">
            <table id="TeamMembers" class="table table-striped table-bordered align-middle">
                <thead class="table-primary">
                    <tr>
                        <th>Name</th>
                        <th>Photo</th>
                        <th>Bio</th>
                        <th>Major Responsibilities</th>
                        <th>Number of Commits</th>
                        <th>Number of Issues</th>
                        <th>Number of Unit Tests</th>
                    </tr>
                </thead>
                <tbody>
                    <tr id="Odin">
                        <td>Odin Limaye</td>
                        <td>Coming soon</td>
                        <td>Coming soon</td>
                        <td>Coming soon</td>
                        <td id="OdinCommits">Loading...</td>
                        <td id="OdinIssues">Loading...</td>
                        <td>0</td>
                    </tr>
                    <tr id="Francisco">
                        <td>Francisco Vivas</td>
                        <td>Coming soon</td>
                        <td>Coming soon</td>
                        <td>Coming soon</td>
                        <td id="FranciscoCommits">Loading...</td>
                        <td id="FranciscoIssues">Loading...</td>
                        <td>0</td>
                    </tr>
                    <tr id="Mahika">
                        <td>Mahika Dawar</td>
                        <td>Coming soon</td>
                        <td>Coming soon</td>
                        <td>Coming soon</td>
                        <td id="MahikaCommits">Loading...</td>
                        <td id="MahikaIssues">Loading...</td>
                        <td>0</td>
                    </tr>
                    <tr id="Jose">
                        <td>Jose Lopez</td>
                        <td>Coming soon</td>
                        <td>Coming soon</td>
                        <td>Coming soon</td>
                        <td id="JoseCommits">Loading...</td>
                        <td id="JoseIssues">Loading...</td>
                        <td>0</td>
                    </tr>
                    <tr id="Christine">
                        <td>Christine Dominic</td>
                        <td>Coming soon</td>
                        <td>Coming soon</td>
                        <td>Coming soon</td>
                        <td id="ChristineCommits">Loading...</td>
                        <td id="ChristineIssues">Loading...</td>
                        <td>0</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <h2 class="mt-5">Data Sources</h2>
        <p>Coming soon</p>

        <h2 class="mt-4">Tools Used</h2>
        <p>Coming soon</p>

        <h2 class="mt-4">Links Used</h2>
        <p>Coming soon</p>

    </main>

    <!-- Footer -->
    <footer class="text-center py-3 bg-primary text-white">
        &copy; 2025 FoodBankConnect
    </footer>

    <!-- Bootstrap JS Bundle -->
    <script 
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js">
    </script>

    <!-- Original JavaScript Logic -->
    <script>
        // Our repo's project ID
        const PROJECT = "74614252";

        // Array of each team member's first name and GitLab user ID
        var team = [
            {name: "Odin", user: "29883443"},
            {name: "Mahika", user: "30052392"},
            {name: "Christine", user: ""},
            {name: "Jose", user: ""},
            {name: "Francisco", user: ""},
        ];

        for (var i = 0; i < team.length; i++) {
            (function(member) {
                const COMMITS = `https://gitlab.com/api/v4/projects/${PROJECT}/repository/commits?author_id=${member.user}`;
                const ISSUES = `https://gitlab.com/api/v4/projects/${PROJECT}/issues?author_id=${member.user}`;

                // Get the current member's commits
                fetch(COMMITS)
                    .then(raw_http => raw_http.json())
                    .then(json_commits => {
                        document.getElementById(`${member.name}Commits`).textContent = json_commits.length;
                    })
                    .catch(error => {
                        console.error("Error fetching commits: ", error);
                        document.getElementById(`${member.name}Commits`).textContent = "Error fetching commits";
                    });

                // Get the current member's issues
                fetch(ISSUES)
                    .then(raw_http => raw_http.json())
                    .then(json_issues => {
                        document.getElementById(`${member.name}Issues`).textContent = json_issues.length;
                    })
                    .catch(error => {
                        console.error("Error fetching issues: ", error);
                        document.getElementById(`${member.name}Issues`).textContent = "Error fetching issues";
                    });
            })(team[i]);
        }
    </script>
</body>
</html>
